{namespace price=Bermuda\BssShop\ViewHelpers}

<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default"/>

<f:section name="content">
    <div class="container">
        <div class="row justify-content-center  pt-5">

            <f:render partial="Categories" arguments="{_all}"/>

            <div class="col-xl-7 col-sm-12 pl-0 pr-0">
                <div class="row ml-3 mr-3">
                    <div class="col-col-12 pl-0"></div>
                    <h4 class=""><f:translate key="tx_bssshop_domain_model_cart.checkout"/></h4>
                </div>
                <div class="row mt-1 mr-3 ml-3">
                    <div class="col-6 border-bottom font-weight-bold">
                        Products
                    </div>
                    <div class="col-2 border-bottom font-weight-bold text-right">
                        Amount
                    </div>
                    <div class="col-2 border-bottom font-weight-bold text-right">
                        Price
                    </div>
                    <div class="col-2 border-bottom border-left font-weight-bold text-right">
                        Total
                    </div>
                </div>
                <f:for each="{cart.cartitems}" as="cartitem" iteration="iterator">

                    <f:if condition="{iterator.isOdd}">
                        <f:then>
                            <div class="row mr-3 ml-3">
                                <div class="col-6 pt-2 pb-2">
                                    <div class="row">
                                        <div class="col-2">
                                            <f:if condition="{cartitem.build.image.0}">
                                                <f:image
                                                        image="{cartitem.build.image.0}"
                                                        title="{f:if(condition:image.originalResource.title, then:newsItem.image.originalResource.title, else:newsItem.title)}"
                                                        alt="{f:if(condition:image.originalResource.alternative, then:image.originalResource.alternative, else:newsItem.title)}"
                                                        width="30"
                                                        height="30"
                                                />
                                            </f:if>
                                        </div>
                                        <div class="col-10 cart-view-title pt-1" title="{cartitem.product.name} - {cartitem.build.name}">
                                            <f:link.action action="show" controller="Product"
                                                           arguments="{product : cartitem.product, buildid : cartitem.build}">

                                                <b>{cartitem.product.name}</b> - {cartitem.build.name}
                                            </f:link.action>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-2 order-table-cell text-right">
                                    x{cartitem.amount}
                                </div>
                                <div class="col-2 order-table-cell text-right pl-1">
                                    {price:priceFormat(price: '{cartitem.build.price}', currency: 1)} Fr.
                                </div>
                                <div class="col-2 order-table-cell pb-1 border-left text-right pl-1">
                                    {price:priceFormat(price: '{cartitem.total}', currency: 1)} Fr.
                                </div>
                            </div>
                        </f:then>
                        <f:else>
                            <div class="row table-success mr-3 ml-3">
                                <div class="col-6 pt-2 pb-2">
                                    <div class="row">
                                        <div class="col-2">
                                            <f:if condition="{cartitem.build.image.0}">
                                                <f:link.action action="show" controller="Product"
                                                               arguments="{product : cartitem.product, buildid : cartitem.build}">
                                                <f:image
                                                        image="{cartitem.build.image.0}"
                                                        title="{f:if(condition:image.originalResource.title, then:newsItem.image.originalResource.title, else:newsItem.title)}"
                                                        alt="{f:if(condition:image.originalResource.alternative, then:image.originalResource.alternative, else:newsItem.title)}"
                                                        width="30"
                                                        height="30"
                                                />
                                                </f:link.action>
                                            </f:if>
                                        </div>
                                        <div class="col-10 cart-view-title pt-1" title="{cartitem.product.name} - {cartitem.build.name}">
                                            <f:link.action action="show" controller="Product"
                                                           arguments="{product : cartitem.product, buildid : cartitem.build}">
                                                <b>{cartitem.product.name}</b> - {cartitem.build.name}
                                            </f:link.action>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-2 order-table-cell text-right">
                                    x{cartitem.amount}
                                </div>
                                <div class="col-2 order-table-cell text-right pl-1">
                                    {price:priceFormat(price: '{cartitem.build.price}', currency: 1)} Fr.
                                </div>
                                <div class="col-2 order-table-cell pb-1 pl-1 border-left text-right pl-1">
                                    {price:priceFormat(price: '{cartitem.total}', currency: 1)} Fr.
                                </div>
                            </div>
                        </f:else>
                    </f:if>

                </f:for>
                <div class="row justify-content-end mr-3 ml-3">
                    <div class="total col-2 pt-2 pb-1 pl-1 border-left border-top text-right">
                        <u>{price:priceFormat(price: '{cart.total}', currency: 1)} Fr.</u>
                    </div>
                </div>
                <div class="row mr-3 ml-3">
                    <div class="user-info col-6  pb-3 pl-0">
                        <h4 class="mb-3 pt-3">Delivery Address</h4>
                        <f:form action="confirm" controller="Order" arguments="{cart : cart, settings : settings}" objectName="form">
                            <f:form.textfield property="name" value="{client.name}" readonly="1" class="input-name"/>
                            <f:link.action action="edit" controller="Client" arguments="{client : client}">
                            <span><i class="fa fa-pencil"></i></span>
                            </f:link.action>

                            <f:form.textfield property="email" value="{client.email}" readonly="1" class="input-width"/>

                            <f:form.textfield property="street" value="{client.street}" readonly="1" class="input-width"/>

                            <f:form.textfield property="city" value="{client.zip} {user.city}" readonly="1" class="input-width"/>

                            <f:form.textfield property="country" value="{client.country.shortNameEn}" required="1" readonly="1" class="input-width"/>

                            <f:form.textfield property="phone" value="{client.phone}" class="input-width mb-5" readonly="1"/>


                            <h4 class="border-top pb-2 pt-2">Message</h4>
                            <div class="form-group">
                                <f:form.textarea property="message" rows="4" class="form-control"
                                                 id="client-cart-message"/>
                            </div>

                                <div class="col pt-3 mb-5 pl-0 pr-0">
                                    <f:link.action action="list" controller="Product" class="btn btn-success color-white mr-2">
                                        <span class="mr-2"><i class="fa fa-arrow-left"></i></span>Back
                                        to
                                        Shop
                                    </f:link.action>
                                    <f:form.button type="submit" class="btn btn-success color-white">
                                        <span class="mr-2"><i class="fa fa-paper-plane"></i></span>Confirm
                                        Order
                                    </f:form.button>
                                </div>

                        </f:form>
                    </div>
                </div>
            </div>

            <f:render partial="Navigation" arguments="{_all}"/>

        </div>
    </div>

</f:section>

</html>
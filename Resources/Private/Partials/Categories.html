<div class="col-xl-2 left-menu border-right">

    <div id="accordion1">
        <div class="accordion-group mr-3">
            <div class="row accordion-heading pb-1 border-bottom">
                <div class="col-12">
                    <div class="row pl-3">
                        <div class="col-xl-1 align-bottom pr-0 pl-0">
                            <i class="fa fa-th"></i>
                        </div>
                        <div class="col-xl-11 pl-2">
                            <f:link.page id="{settings.merchant.listview}" class="all-categories">
                                <f:translate key="tx_bssshop_domain_model_product.home"/>
                            </f:link.page>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <f:for each="{categories}" as="category" iteration="iterator">
            <div class="accordion-group pr-3">
                <div class="row accordion-heading pb-1 pt-1 border-bottom">
                    <div class="col-9">
                        <f:link.action action="list" controller="Product" arguments="{category : category}">
                            {category.title}
                        </f:link.action>
                    </div>
                    <f:if condition="{category.children}">
                    <a class="col-3 accordion-toggle pointer text-right" data-toggle="collapse"
                       data-parent="#accordion1"
                       href="#collapse-{category.uid}">
                        <i class="fa fa-chevron-down pt-1"></i>
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    </f:if>
                </div>
                <f:for each="{category.children}" as="children" iteration="iterator">
                    <div id="collapse-{children.parent}" class="accordion-body row pl-4 collapse border-bottom">

                        <div class="accordion-inner">
                            <div class="accordion" id="accordion2">
                                <div class="accordion-group pr-3">
                                    <div class="row pb-1 pt-1 accordion-heading">
                                        <div class="col-9">
                                            <f:link.action action="list" controller="Product" arguments="{category : children}">
                                                {children.title}
                                            </f:link.action>
                                        </div>
                                        <f:if condition="{children.children}">
                                            <a class="col-3 accordion-toggle text-right" data-toggle="collapse"
                                               data-parent="#accordion2"
                                               href="#collapse-{children.uid}">
                                                <i class="fa fa-chevron-down pt-1 dd"></i>
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                        </f:if>
                                    </div>

                                    <f:if condition="{children.children}">

                                        <f:render section="menu" arguments="{children : children.children}"/>

                                    </f:if>

                                </div>
                            </div>
                        </div>
                    </div>
                </f:for>
            </div>
        </f:for>
    </div>
</div>


<f:section name="menu">
    <f:for each="{children}" as="child" iteration="iterator">
        <f:if condition="{child.children}">
            <f:then>
                <div id="collapse-{child.parent}" class="accordion-body row pl-4 collapse border-bottom">
                    <div class="accordion-inner">
                        <div class="accordion" id="sub-accordion-{child.parent}">
                            <div class="accordion-group pr-3">
                                <div class="row pb-1 pt-1 accordion-heading">
                                    <div class="col-8">
                                        <f:link.action action="list" controller="Product" arguments="{category : child}">
                                            {child.title}
                                        </f:link.action>
                                    </div>
                                    <a class="col-4 accordion-toggle text-right" data-toggle="collapse"
                                       data-parent="#sub-accordion-{child.uid}"
                                       href="#collapse-{child.uid}">
                                        <i class="fa fa-chevron-down pt-1 sss"></i>
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                </div>

                                <f:if condition="{child.children}">
                                    <f:render section="menu" arguments="{children : child.children}"/>
                                </f:if>
                            </div>
                        </div>
                    </div>
                </div>
            </f:then>
            <f:else>
                <div id="collapse-{child.parent}" class="accordion-body collapse ml-1">
                    <div class="accordion-inner">
                        <div class="accordion" id="sub-accordion-{child.parent}">
                            <div class="accordion-group pr-3 pb-1 pt-1">

                                <div class="accordion-heading">
                                    <f:link.action action="list" controller="Product"
                                                   arguments="{category : child}">
                                        {child.title}
                                    </f:link.action>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </f:else>
        </f:if>
    </f:for>
</f:section>


